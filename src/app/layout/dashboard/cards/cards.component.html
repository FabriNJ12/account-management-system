<main class="w-full">
    <!-- <SM -->
    <div class="w-full  grid-cols-1 sm:grid-cols-2 gap-4 mt-4 hidden sm:grid ">

      <!-- CARD - Total por cobrar -->
      <div class="bg-BGblackSecond rounded-2xl border border-divideDM p-5 flex flex-col gap-2 ">
        <span class="text-gray-400 text-sm font-medium tracking-wide">Total por cobrar</span>
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 bg-green-400 rounded-full ring-4 ring-green-400/20 animate-pulse" ></div>
          <h2 class="text-3xl font-bold text-white">${{totalDebt | number}}</h2>
          <span class="text-gray-500 text-sm mb-1">ARS</span>
        </div>
        <p class="text-gray-500 text-xs">Sumatoria de todas las deudas activas</p>
      </div>

      <!-- CARD - Cliente con más días sin pagar -->
      <div  class="bg-BGblackSecond rounded-2xl border border-divideDM p-5 flex flex-col gap-2 shadow-lg">
            <ng-container *ngIf="older_payment && older_payment.days > 3; else noLatestPays">
              <span class="text-gray-400 text-sm font-medium tracking-wide">Cliente con más días sin pagar</span>

              <div class="flex justify-between items-center gap-2">
                <!-- Columna izquierda: nombre -->
                <h2 class="text-xl font-semibold text-white truncate">{{older_payment.name | titlecase}}</h2>

                <!-- Columna derecha: días + deuda en un solo badge -->
                <span class="px-3 py-1 flex flex-row gap-2 items-center bg-red-500/15 text-red-400 rounded-full text-xs font-semibold ring-1 ring-red-500/50 *:truncate">
                  <span>{{older_payment.days}} días</span>
                  <span>|</span>
                  <span>Deuda: ${{ older_payment.debt_amount }}</span>
                </span>
              </div>

              <p class="text-gray-500 text-xs">Último pago: {{older_payment.reference_date | date}}</p>
             </ng-container>

          <ng-template #noLatestPays>
            <div class="flex flex-col items-center justify-center text-center gap-2  text-gray-500">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-green-500/70" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m6 2.25a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>

              <p class="text-sm font-medium text-gray-300">Sin clientes atrasados</p>
              <p class="text-xs text-gray-500">Nadie supera los 3 días sin pagar</p>
            </div>
          </ng-template>
      </div>
  
      
        
    </div>


    <!-- >Mobile -->
    <section class="w-full overflow-hidden sm:hidden mt-4">
      <div class="w-full border border-divideDM rounded-2xl  bg-BGblackSecond">
        <div *ngIf="!skeleton" [ngClass]="{'-translate-x-full':slice}" class="flex  duration-500 overflow-x-none scroll-smooth ease-in-out snap-x snap-mandatory no-scrollbar w-full transition-transform ">

          <!-- CARD 1 (Cliente más atrasado) -->
          <section class="min-w-full snap-start flex flex-col gap-2 p-3">
            <span class="text-gray-400 text-sm font-medium tracking-wide">Total por cobrar</span>
            <div class="flex items-center gap-2">
              <div class="w-3 h-3 bg-green-400 rounded-full ring-4 ring-green-400/20 animate-pulse pr-3" ></div>
              <h2 class="text-3xl font-bold text-white">${{totalDebt | number}}</h2>
              <span class="text-gray-500 text-sm mb-1">ARS</span>
            </div>
            <p class="text-gray-500 text-xs">Sumatoria de todas las deudas activas</p>
          </section>


          <!-- CARD 2 (Total por cobrar) -->
          <section class="min-w-full snap-start flex flex-col gap-2 p-3">
            <ng-container *ngIf="older_payment!== null && older_payment.days > 3 && skeleton===false; else noLatestPays">
              <span class="text-gray-400 text-sm font-medium tracking-wide">Cliente con más días sin pagar</span>

              <div class="flex justify-between items-center">
                <!-- Columna izquierda: nombre -->
                <h2 class="text-xl font-semibold text-white">{{older_payment.name | titlecase}}</h2>

                <!-- Columna derecha: días + deuda en un solo badge -->
                <span class="px-3 py-1 flex flex-row gap-2 items-center bg-red-500/15 text-red-400 rounded-full text-xs font-semibold ring-1 ring-red-500/50">
                  <span>{{older_payment.days}} días</span>
                  <span>|</span>
                  <span>Deuda: ${{ older_payment.debt_amount }}</span>
                </span>
              </div>

              <p class="text-gray-500 text-xs">Último pago: {{older_payment.reference_date | date}}</p>
            </ng-container>

            <ng-template #noLatestPays>
              <div class="flex flex-col items-center justify-center text-center gap-2 text-gray-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-green-500/70" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m6 2.25a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>

                <p class="text-sm font-medium text-gray-300">Sin clientes atrasados</p>
                <p class="text-xs text-gray-500">Nadie supera los 3 días sin pagar</p>
              </div>
            </ng-template>
          </section>

        </div>
        
        <!-- skeleton loade -->
        <section *ngIf=" skeleton" class="min-w-full snap-start flex flex-col gap-3 p-3">

          <!-- Título skeleton -->
          <div class="h-4 w-2/8 bg-gray-700 rounded-full animate-pulse"></div>

          <div class="flex justify-between items-center">
            <!-- Nombre -->
            <div class="h-4 w-2/6 bg-gray-700 rounded-full animate-pulse"></div>
          </div>

          <!-- Último pago -->
          <div class="h-4 w-2/4 bg-gray-700 rounded-full animate-pulse"></div>

        </section>
      </div>
    </section>

</main>



